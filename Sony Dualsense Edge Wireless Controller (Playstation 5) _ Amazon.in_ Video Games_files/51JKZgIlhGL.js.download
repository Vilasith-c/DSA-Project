(function(k){var q=window.AmazonUIPageJS||window.P,z=q._namespace||q.attributeErrors,d=z?z("DetailPageMiniDPAssets",""):q;d.guardFatal?d.guardFatal(k)(d,window):d.execute(function(){k(d,window)})})(function(k,q,z){k.when("A","hctp-configs","hctp-attach-constants","hctp-attach-logger","amazon-api-cart-hctp-add-items","amazon-api-cart-hctp-summary","hctp-media-builder","hctp-productV2","hctp-price-formatter","atf").register("hctp-utils",function(d,a,c,e,b,v,h,l,p){function g(a,c){m(a)&&m(a).val(c)}
function t(){m(c.SELECTORS.CART_INFO_SPINNER).hide();m(c.SELECTORS.CART_INFO_CONTENT).show()}function r(a,b){var u=m(c.SELECTORS.UPSELL_ATC_CONTAINER_PREFIX+a);if(!u)return null;m(u).children(c.SELECTORS.UPSELL_ATC_SPINNER).hide();b?(f(a,!0),m(u).children(c.SELECTORS.UPSELL_ATC_SUCCESS).show(),e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_SUCCESS,!1)):(f(a,!1),m(u).children(c.SELECTORS.UPSELL_ATC_ERROR).show(),e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_FAILURE,!1));e.endLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_LATENCY)}function q(a){k.when("nav.setCartCount").execute(function(c){c(a)})}function x(b,d,n){try{q(b.itemCount);var u=b.itemCount,r=b.subtotal.displayString,h=a.getHctpConfig();b="";var f=h.proceedToCheckOutTitle;b=1>=u?h.itemTitle:h.itemsTitle;m(c.SELECTORS.CART_INFO_SUMMARY_FAILURE).hide();m(c.SELECTORS.CART_INFO_CART_SUB_TOTAL).show();m(c.SELECTORS.CART_INFO_CART_QUANTITY).html("("+
u+" "+b+"):");m(c.SELECTORS.CART_INFO_PTC_TEXT).html(f+" ("+u+" "+b+")");m(c.SELECTORS.CART_INFO_CART_VALUE).html(r);m(c.SELECTORS.CART_INFO_CART_VALUE).show();t();if(n&&n.accessoryItemAsin){var g=n.accessoryItemAsin,p=m(c.SELECTORS.ADDED_UPSELL_ASIN_SELECTOR);if(p){var l=p.val();p.val((l?l:"")+g+c.COMMON.COMMA)}}}catch(D){e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_ADD_CART_NAV_FAILURE,!1)}}function y(a,b){m(c.SELECTORS.CART_INFO_CART_SUB_TOTAL).hide();
m(c.SELECTORS.CART_INFO_CART_VALUE).hide();m(c.SELECTORS.CART_INFO_SUMMARY_FAILURE).show();t()}function w(){e.beginLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_LATENCY);return v.get(["RETAIL"]).then(function(b){if(!b||!b.entity||!b.entity.summary)throw Error("No retail cart summary found");if(b.entity.summary[0])b=b.entity.summary[0];else{b=n;var d=a.getHctpConfig();b.subtotal.displayString=p.formatPrice(0,d.currencyOfPreference,d.languageOfPreference)}e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_SUCCESS,!1);e.endLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_LATENCY);return b}).catch(function(a){e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_FAILURE,!1);e.endLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_LATENCY);throw a;})}function f(a,b){g(c.SELECTORS.UPSELL_ATC_STATUS_PREFIX+a,b?"SUCCEEDED":"FAILED")}var m=d.$,n={itemCount:0,
subtotal:{displayString:"0.00"}};return{isFunction:function(a){return"function"===typeof a},elementExists:function(a){return a?a instanceof d.$?0!==a.length:0!==d.$(a).length:!1},updateInputElement:g,addUpsellAsinToCart:function(e,d,n){d||(d=a.getHctpConfig());b.addItems([{asin:e.accessoryItemAsin,offerListingId:e.accessoryItemOfferingId,quantity:e.accessoryItemQuantity,additionalParameters:{itemAssociation:{associatedItemId:d.baseAsin,programType:"Attach",renderType:"renderAll",deleteConstraint:{mutuallyInclusive:!1}}}}],
c.REF_TAGS.ATTACH_UPSELL_ATC+n).then(function(a){if(a.type===c.RESPONSE_TYPE.ADD_ITEMS_INCOMPLETE_ADD)throw Error(a.entity.details.message);r(n,!0);w().then(function(a){x(a,d,e)}).catch(function(a){y(a,d)})}).catch(function(a){r(n,!1)})},getAttachBaseAsinData:function(a){return{customFields:{field1:a.baseAsin}}},getAttachAccessoryData:function(a,b){return{customFields:{field1:b.baseAsin,field2:a.accessoryItemAsin,field3:a.accessoryItemPrice}}},updateCartInfoForBaseAsinATC:function(b){var n=a.getHctpConfig();
b&&(b=b.request.getAsins(),l.getProductsBatch(b,[l.RESOURCE_INCLUSIONS.PRODUCT_IMAGES]).then(function(a){a.entities&&(a.entities.forEach(function(a){if(a.type===l.RESPONSE_TYPE_SUCCESS){var b=a.entity;if(b&&b.productImages&&b.productImages.entity&&b.productImages.entity.images&&b.productImages.entity.images.length){var e=b.productImages.entity;a=e.altText;e=h.init(e.images[0].lowRes).scaleToSquare(60).build().url;b="/dp/"+b.asin;a=d.$("\x3cimg\x3e\x3c/img\x3e").attr("src",e).attr("alt",a);a=d.$("\x3ca\x3e\x3c/a\x3e").attr("href",
b).append(a);a=d.$("\x3cdiv\x3e\x3c/div\x3e").addClass("attach-base-product-image-wrapper").append(a)}else a=d.$();m(c.SELECTORS.CART_INFO_BASE_PRODUCT_IMAGE_CONTAINER).append(a)}}),e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_PRODUCT_IMAGE_FETCH_SUCCESS,!1))}).catch(function(a){m(c.SELECTORS.CART_INFO_BASE_PRODUCT_IMAGE_CONTAINER).hide();e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_PRODUCT_IMAGE_FETCH_FAILURE,
!1)}));w().then(function(a){x(a,n)}).catch(function(a){y(a,n)})},manuallyLoadUpsellAsinImages:function(){var a=m(c.SELECTORS.SIDE_SHEET_UPSELL_ASIN_ITEM);d.loadImageManually(a.find(c.SELECTORS.UPSELL_ASIN_IMAGE))}}});"use strict";k.when("A","hctp-attach-logger","hctp-utils","hctp-configs","hctp-attach-constants").execute(function(d,a,c,e,b){function v(d,p){var r=d.data;d=r.asinIndex;var t=e.getHctpConfig(),l=g(b.SELECTORS.UPSELL_ATC_CONTAINER_PREFIX+d);g(l).children(b.SELECTORS.UPSELL_ATC_BUTTON).hide();
g(l).children(b.SELECTORS.UPSELL_ATC_SUCCESS).hide();g(l).children(b.SELECTORS.UPSELL_ATC_ERROR).hide();g(l).children(b.SELECTORS.UPSELL_ATC_SPINNER).css("display","inline-block");h();r={accessoryItemAsin:r.asin,accessoryItemOfferingId:r.offerListingId,accessoryItemQuantity:1,accessoryItemPrice:r.offerPrice};c.addUpsellAsinToCart(r,t,d);t=c.getAttachAccessoryData(r,t);p?a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_ATC_CLICK+d,!0,t):a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_TRY_AGAIN_CLICK+d,!0,t);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME)}function h(){g(b.SELECTORS.MINI_DP_CONTAINER).hide();g(b.SELECTORS.MINI_DP_SPINNER).show();g(b.SELECTORS.MINI_DP_PLACEHOLDER).hide();g(b.SELECTORS.SIDE_SHEET_CATEGORIZED_UPSELL_ASINS).slideDown(700,"linear");g(b.SELECTORS.MINI_DP_ERROR).hide()}function l(){g(b.SELECTORS.MINI_DP_SPINNER).hide();g(b.SELECTORS.MINI_DP_ERROR).show()}function p(c){g(b.SELECTORS.MINI_DP_IMAGE_HIGHLIGHT).attr(b.ATTRIBUTE.SRC,
c.data.imageUrl);a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_THUMBNAIL_FOCUS,!1)}var g=d.$,t=self.windowSpecs={PRODUCT_DOCUMENT_WINDOW_NAME:"ProductDocumentDisplay",PRODUCT_DOCUMENT_WINDOW_SPECS:"width\x3d500,height\x3d500,dependent\x3dyes,directories\x3dno,location\x3dno,menubar\x3dno,resizable\x3dyes,scrollbar\x3dyes,toolbar\x3dno"};d.declarative(b.DECLARATIVE.MINI_DP_TRY_AGAIN,b.EVENT.TYPE.CLICK,function(a){v(a,!1)});d.declarative(b.DECLARATIVE.MINI_DP_ATC,
b.EVENT.TYPE.CLICK,function(a){v(a,!0)});d.declarative(b.DECLARATIVE.MINI_DP_TRIGGER,b.EVENT.TYPE.CLICK,function(c){g(b.SELECTORS.SIDE_SHEET_CATEGORIZED_UPSELL_ASINS).hide();g(b.SELECTORS.MINI_DP_CONTAINER).slideDown(700,"linear");c=c.data;c={asin:c.asin,asinIndex:c.asinIndex,isV2:!0,clientName:"ValueAddsAttachDesktop",variations:[],atcButtonState:g(b.SELECTORS.UPSELL_ATC_STATUS_PREFIX+c.asinIndex).val()};a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_TRIGGER,
!1);a.beginLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME);a.beginLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_LATENCY);d.get(b.ENDPOINTS.MINI_DP_URL_PREFIX+g.param(c),{success:function(c){var e=g(b.SELECTORS.MINI_DP_PLACEHOLDER);0<e.length?(e[0].innerHTML=c,g(b.SELECTORS.MINI_DP_SPINNER).hide(),e.show(),d.loadImageManually(g(b.SELECTORS.MINI_DP_THUMBNAIL_IMAGE)),d.loadImageManually(g(b.SELECTORS.MINI_DP_IMAGE_HIGHLIGHT))):l();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_SUCCESS,!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_LATENCY)},error:function(c){l();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_FAILURE,!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_LATENCY)}})});d.declarative(b.DECLARATIVE.MINI_DP_BACK,b.EVENT.TYPE.CLICK,function(c){h();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_BACK_CLICK,
!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME)});d.declarative(b.DECLARATIVE.MINI_DP_THUMBNAIL_FOCUS,b.EVENT.TYPE.MOUSE_ENTER,function(a){p(a)});d.declarative(b.DECLARATIVE.MINI_DP_THUMBNAIL_FOCUS,b.EVENT.TYPE.KEY_DOWN,function(a){a.$event&&a.$event.originalEvent&&a.$event.originalEvent.key===b.KEY.ENTER&&p(a)});d.declarative(b.DECLARATIVE.MINI_DP_PRODUCT_DOC_OPEN,b.EVENT.TYPE.CLICK,function(c){q.open(c.data.url,t.PRODUCT_DOCUMENT_WINDOW_NAME,t.PRODUCT_DOCUMENT_WINDOW_SPECS);
a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_PRODUCT_DOC_OPEN,!1)});d.declarative(b.DECLARATIVE.MINI_DP_NO_THANKS,b.EVENT.TYPE.CLICK,function(c){h();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_NO_THANKS_CLICK,!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME)})});"use strict";k.when("A","atf").register("hctp-configs",function(d){var a=d.$;return{getHctpConfig:function(){var c=
a("#hctpConfigStateData").data(),e=a("#hctpAttachPreATCStateData").data();if(!e)return null;var b=e.baseAsinOfferListingId;null===b&&(b=a("#addToCart_feature_div").parent().find("#oid").val());return c?{marketplaceId:c.marketplaceId,customerId:c.customerId,sessionId:c.sessionId,languageOfPreference:c.languageOfPreference,currencyOfPreference:c.currencyOfPreference,baseAsin:c.baseAsin,baseAsinOfferListingId:b,baseAsinThumbnailUrl:c.baseAsinThumbnailUrl,attachEligible:c.attachEligible,deviceType:e.deviceType,
itemsTitle:c.itemsTitle,itemTitle:c.itemTitle,verificationSessionId:"",csrfAddCart:c.csrfAddCart,cartAapiEndpoint:c.cartAapiEndpoint,bottomSheetCloseMsg:c.bottomsheetCloseMsg,requestId:e.requestId,proceedToCheckOutTitle:c.proceedToCheckOutTitle,latencyReductionWeblabTreatment:e.latencyReductionWeblabTreatment}:{verificationSessionId:"",baseAsin:e.baseAsin,requestId:e.requestId,deviceType:e.deviceType,csrfAddCart:e.csrfAddCart,attachEligible:e.attachEligible,cartAapiEndpoint:e.cartAapiEndpoint,languageOfPreference:e.languageOfPreference,
latencyReductionWeblabTreatment:e.latencyReductionWeblabTreatment}}}});"use strict";k.when("A").register("hctp-attach-constants",function(d){return{ENDPOINTS:{CART_BASE:"/cart",GURUPA_CART_BASE:"/gp/cart/view.html",CHECKOUT_BASE:"/gp/checkoutportal/enter-checkout.html?ie\x3dUTF8\x26proceedToCheckout\x3d1\x26useDefaultCart\x3d1\x26sessionID\x3d",MINI_DP_URL_PREFIX:"/hctp/minidp?"},CSA_EVENT_METRIC:{PRODUCER_ID:"valueshopping",FEATURE_NAME:"attach",SCHEMA_ID:"valueShopping.ClientSideMetrics.2",METRIC_TYPE:{CLICK:"click"},
METRIC_NAME:{ATTACH_CHECKOUT_CLICK:"hctpAttachCheckoutClick",ATTACH_VIEW_CART_CLICK:"hctpAttachViewCartClick",ATTACH_SIDE_SHEET_CLOSE:"hctpAttachSideSheetClose",ATTACH_SHOW_MORE:"hctpAttachShowMore",ATTACH_SHOW_LESS:"hctpAttachShowLess",ATTACH_ADD_CART_NAV_FAILURE:"hctpAttachAddCartNavFailure",FORMAT_INTL:"priceFormatterUsedIntlNumberFormat",FORMAT_SIMPLE:"priceFormatterUsedSimpleFormat",ATTACH_GXA_CALL_SUCCESS:"hctpAttachGxaCallSuccess",ATTACH_GXA_CALL_FAILURE:"hctpAttachGxaCallFailure",ATTACH_GXA_CALL_LATENCY:"hctpAttachGxaLatency",
ATTACH_GAP_ATC_TO_SIDE_SHEET:"hctpAttachGapAtcToSideSheet",ATTACH_DISPLAY_SUCCESS:"hctpAttachSuccessWhileLaunchingSideSheet",ATTACH_DISPLAY_FAILURE:"hctpAttachFailureWhileLaunchingSideSheet",ATTACH_BASE_ATC_CLICK:"hctpAttachBaseATCClick",ATTACH_BASE_ATC_SUCCESS:"hctpAttachBaseAsinATCSuccess",ATTACH_BASE_ATC_FAILURE:"hctpAttachBaseAsinATCFailure",ATTACH_BASE_ATC_LATENCY:"hctpAttachBaseAsinATCLatency",ATTACH_BASE_ATC_TRY_AGAIN:"hctpAttachBaseAsinATCTryAgain",MINI_DP_TRIGGER:"hctpAttachMiniDPTrigger",
MINI_DP_CALL_SUCCESS:"hctpAttachMiniDPCallSuccess",MINI_DP_CALL_FAILURE:"hctpAttachMiniDPCallFailure",MINI_DP_CALL_LATENCY:"hctpAttachMiniDPCallLatency",MINI_DP_ATC_CLICK:"hctpAttachMiniDPATC-",MINI_DP_TRY_AGAIN_CLICK:"hctpAttachMiniDPTryAgain",MINI_DP_BACK_CLICK:"hctpAttachMiniDPBackClick",MINI_DP_NO_THANKS_CLICK:"hctpAttachMiniDPNoThanksClick",MINI_DP_DWELL_TIME:"hctpAttachMiniDPDwellTime",MINI_DP_THUMBNAIL_FOCUS:"hctpAttachMiniDPThumbnailFocus",MINI_DP_PRODUCT_DOC_OPEN:"hctpAttachMiniDPProductDocOpen",
ATTACH_GET_CART_SUMMARY_SUCCESS:"hctpAttachCartSummarySuccess",ATTACH_GET_CART_SUMMARY_FAILURE:"hctpAttachCartSummaryFailure",ATTACH_GET_CART_SUMMARY_LATENCY:"hctpAttachCartSummaryLatency",ATTACH_UPSELL_ATC_CLICK:"hctpSideSheetUpsellATC-",ATTACH_UPSELL_ATC_SUCCESS:"hctpAttachUpsellATCSuccess",ATTACH_UPSELL_ATC_FAILURE:"hctpAttachUpsellATCFailure",ATTACH_UPSELL_ATC_LATENCY:"hctpAttachUpsellATCLatency",ATTACH_UPSELL_ATC_TRY_AGAIN:"hctpAttachUpsellATCTryAgain",ATTACH_BASE_PRODUCT_IMAGE_FETCH_SUCCESS:"hctpAttachBaseProductImageFetchSuccess",
ATTACH_BASE_PRODUCT_IMAGE_FETCH_FAILURE:"hctpAttachBaseProductImageFetchFailure"}},REF_TAGS:{ATTACH_CART_REDIRECT:"hctp_attach_dss_cart",ATTACH_CHECKOUT:"hctp_attach_dss_ptc",ATTACH_UPSELL_ATC:"hctp_attach_dss_atc_"},COMMON:{DOT:".",COMMA:","},EVENT:{PAGE_UPDATE:"a:pageUpdate",TYPE:{CLICK:"click",KEY_DOWN:"keydown",MOUSE_ENTER:"mouseenter"}},CLASSES:{AOK_HIDDEN:"aok-hidden",BUTTON_PRIMARY:"a-button-primary"},SELECTORS:{SHOW_MORE:".attach-show-more",SHOW_LESS:".attach-show-less",CARD_EXPAND_CONTENT:".attach-card-expand-content",
ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_UNIFICATION_FLAG:"#attach-unification",ADDED_UPSELL_ASIN_SELECTOR:"#hctp-attach-added-upsell-asins",ATTACH_DSS_MODAL_LAYER:"#hctp-attach-dss-modal-layer",ATTACH_DSS_BACK_DROP:"#hctp-attach-dss-modal-layer #hctp-attach-popover-light-box",ATTACH_DSS_PLACEHOLDER:"#hctp-attach-side-sheet-placeholder",SIDE_SHEET:"#hctp-attach-side-sheet",SIDE_SHEET_SHOW_MORE:"#hctp-attach-side-sheet .attach-show-more",SIDE_SHEET_SHOW_LESS:"#hctp-attach-side-sheet .attach-show-less",
SIDE_SHEET_UPSELL_ATC:"#hctp-attach-side-sheet .upsell-atc-button",SIDE_SHEET_CLOSE_BUTTON:"#hctp-attach-side-sheet .attach-close-button",SIDE_SHEET_UPSELL_ATC_RETRY:"#hctp-attach-side-sheet .upsell-atc-retry",SIDE_SHEET_UPSELL_ASIN_ITEM:"#hctp-attach-side-sheet .upsell-asin-item",SIDE_SHEET_CART_BUTTON:"#attach-cart-info-content .attach-view-cart-button",SIDE_SHEET_CHECKOUT_BUTTON:"#attach-cart-info-content .attach-checkout-button",SIDE_SHEET_UPSELL_PRODUCTS_LIST:"#hctp-attach-side-sheet ul.attach-upsell-list",
SIDE_SHEET_BASE_ATC_TRY_AGAIN:"#hctp-attach-side-sheet .attach-base-atc-try-again",SIDE_SHEET_PRIMARY_CART_BUTTON:"#attach-cart-info-content .attach-primary-cart-button",SIDE_SHEET_VERTICAL_SCROLL:"#hctp-attach-side-sheet .attach-side-sheet-vertical-scroll",SIDE_SHEET_CATEGORIZED_UPSELL_ASINS:"#hctp-attach-side-sheet .attach-categorized-upsell-asins",SIDE_SHEET_BASE_ATC_ALERT_CONTAINER:"#hctp-attach-side-sheet .attach-base-atc-alert-error-container",SIDE_SHEET_BASE_ATC_PARTIAL_ERROR_MSG:"#hctp-attach-side-sheet .attach-base-atc-partial-error-msg",
SIDE_SHEET_BASE_ATC_PROCESSING_ERROR_MSG:"#hctp-attach-side-sheet .attach-base-atc-processing-error-msg",CART_INFO_CART_VALUE:"#attach-cart-info-content .attach-cart-value",CART_INFO_SPINNER:"#hctp-attach-side-sheet #attach-cart-info-spinner",CART_INFO_CONTENT:"#hctp-attach-side-sheet #attach-cart-info-content",CART_INFO_CART_QUANTITY:"#attach-cart-info-content .attach-cart-quantity",CART_INFO_CART_SUB_TOTAL:"#attach-cart-info-content .attach-cart-subtotal",CART_INFO_BASE_ATC_ERROR:"#attach-cart-info-content .attach-base-atc-error",
CART_INFO_PTC_TEXT:"#attach-cart-info-content .attach-proceed-to-checkout-text",CART_INFO_BASE_ATC_SUCCESS:"#attach-cart-info-content .attach-base-atc-success",CART_INFO_SUMMARY_FAILURE:"#attach-cart-info-content .attach-cart-summary-failure",CART_INFO_BASE_PRODUCT_IMAGE_CONTAINER:"#attach-cart-info-content .attach-base-product-image-container",UPSELL_ATC_ERROR:".upsell-atc-error",UPSELL_ATC_BUTTON:".upsell-atc-button",UPSELL_ASIN_IMAGE:".upsell-asin-image",UPSELL_ATC_SPINNER:".upsell-atc-spinner",
UPSELL_ATC_SUCCESS:".upsell-atc-success",UPSELL_ATC_CONTAINER:".upsell-atc-container",UPSELL_ATC_CONTAINER_PREFIX:"#upsell-atc-container-",UPSELL_ATC_STATUS_PREFIX:"#attach-upsell-atc-status-",MINI_DP_CONTAINER:"#attach-mini-dp-container",MINI_DP_ERROR:"#attach-mini-dp-container .attach-mini-dp-error",MINI_DP_BACK_BUTTON:"#hctp-attach-side-sheet .attach-mini-dp-back-button",MINI_DP_SPINNER:"#attach-mini-dp-container .attach-mini-dp-spinner",MINI_DP_PLACEHOLDER:"#attach-mini-dp-container .attach-mini-dp-placeholder",
MINI_DP_THUMBNAIL_IMAGE:"#hctp-attach-mini-dp .hctp-mini-dp-thumbnail-image",MINI_DP_THUMBNAIL_BUTTON:"#hctp-attach-mini-dp .hctp-mini-dp-thumbnail-button",MINI_DP_IMAGE_HIGHLIGHT:"#hctp-attach-mini-dp .hctp-mini-dp-product-image-highlight"},DECLARATIVE:{MINI_DP_ATC:"hctp-mini-dp-atc",MINI_DP_BACK:"attach-mini-dp-back",MINI_DP_TRIGGER:"hctp-mini-dp-trigger",MINI_DP_TRY_AGAIN:"hctp-mini-dp-try-again",MINI_DP_NO_THANKS:"hctp-mini-dp-no-thanks",MINI_DP_THUMBNAIL_FOCUS:"hctp-mini-dp-thumbnail-focus",
MINI_DP_PRODUCT_DOC_OPEN:"hctp-mini-dp-product-docs-open"},KEY:{ENTER:"Enter"},ATTRIBUTE:{SRC:"src"},NAMESPACE:{HCTP_ATTACH_ATC_CLICK_NAMESPACE:"click.hctpAttach"},ERROR:{ATTACH_SIDE_SHEET_NOT_FOUND:"HCTP Attach side sheet not found",ATTACH_PLACEHOLDER_NOT_FOUND:"HCTP Attach placeholder not found"},DATA_FIELD:{CATEGORY:"category"},RESPONSE_TYPE:{ADD_ITEMS_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"}}});"use strict";k.register("hctp-focus-management",function(){var d={attemptFocus:function(a){try{a.focus()}catch(c){}return a===
document.activeElement},focusDescendant:function(a,c){if(a&&a.children)for(var e=0;e<a.children.length;e++){var b=a.children.item("last"===c?a.children.length-e-1:e);if(d.attemptFocus(b)||d.focusDescendant(b,c))return!0}return!1}};return d});"use strict";k.when("A","hctp-attach-constants","hctp-configs","hctp-attach-logger","hctp-utils","hctp-focus-management").register("hctp-attach-side-sheet",function(d,a,c,e,b,v){function h(b){b.preventDefault();var c=this.dataset.category;b=f(a.SELECTORS.SIDE_SHEET_UPSELL_PRODUCTS_LIST);
var d;f(b).each(function(b,e){if(f(e).data(a.DATA_FIELD.CATEGORY)===c)return d=e,!1});if(d){b=f(d).find(a.SELECTORS.SHOW_LESS);var n=f(d).find(a.SELECTORS.SHOW_MORE),h=f(d).find(a.SELECTORS.CARD_EXPAND_CONTENT);f(h).slideDown(400,"linear");f(n).hide();f(b).show()}e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_SHOW_MORE,!1)}function l(b){b.preventDefault();var c=this.dataset.category;b=f(a.SELECTORS.SIDE_SHEET_UPSELL_PRODUCTS_LIST);var d;f(b).each(function(b,
e){if(f(e).data(a.DATA_FIELD.CATEGORY)===c)return d=e,!1});if(d){b=f(d).find(a.SELECTORS.SHOW_LESS);var n=f(d).find(a.SELECTORS.SHOW_MORE),h=f(d).find(a.SELECTORS.CARD_EXPAND_CONTENT);f(h).slideUp(400,"linear");f(b).hide();f(n).show()}e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_SHOW_LESS,!1)}function p(d){d.preventDefault();e.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_LATENCY);d=f(this).closest(a.SELECTORS.UPSELL_ATC_CONTAINER).data().asinIndex;
var h=f(this).closest("li.upsell-asin-item"),n=f(h).data("upsellasin"),p=f(h).data("offerlistingid"),g=f(h).data("offerprice").toString();f(this).hide();f(this).siblings(a.SELECTORS.UPSELL_ATC_SPINNER).css("display","inline-block");h=c.getHctpConfig();n={accessoryItemAsin:n,accessoryItemOfferingId:p,accessoryItemQuantity:1,accessoryItemPrice:g};b.addUpsellAsinToCart(n,h,d);n=b.getAttachAccessoryData(n,h);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_CLICK+
d,!0,n)}function g(b){if(!m.isManagingFocus){var c=f(a.SELECTORS.SIDE_SHEET)[0];c.contains(b.target)?m.lastFocusElement=b.target:(m.isManagingFocus=!0,v.focusDescendant(c,"first"),m.lastFocusElement===document.activeElement&&v.focusDescendant(c,"last"),m.isManagingFocus=!1,m.lastFocusElement=document.activeElement)}}function t(){document.body.style.overflow="";m.$preFocusTrap.remove();m.$postFocusTrap.remove();document.removeEventListener("focus",g,!0);f(a.SELECTORS.SIDE_SHEET).animate({right:"-700px"},
300,"linear");m.originalFocusSource.focus();d.delay(function(){f(a.SELECTORS.ATTACH_DSS_MODAL_LAYER).hide();f(a.SELECTORS.ATTACH_DSS_BACK_DROP).hide()},300)}function r(d){d.stopPropagation();d.preventDefault();d=c.getHctpConfig();d=b.getAttachBaseAsinData(d);b.updateInputElement(a.SELECTORS.ADDED_UPSELL_ASIN_SELECTOR,"");e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_VIEW_CART_CLICK,!0,d);q.location.href=a.ENDPOINTS.CART_BASE+"?ref\x3d"+a.REF_TAGS.ATTACH_CART_REDIRECT}
function k(b){(b.originalEvent?b.originalEvent.key:b.key)===a.KEY.ENTER&&(f(a.SELECTORS.MINI_DP_CONTAINER).hide(),f(a.SELECTORS.SIDE_SHEET_CATEGORIZED_UPSELL_ASINS).slideDown(700,"linear"),f(a.SELECTORS.MINI_DP_SPINNER).show(),f(a.SELECTORS.MINI_DP_PLACEHOLDER).hide(),f(a.SELECTORS.MINI_DP_ERROR).hide())}function x(d){d.stopPropagation();d.preventDefault();d=a.REF_TAGS.ATTACH_CHECKOUT;var h=c.getHctpConfig(),p=b.getAttachBaseAsinData(h);b.updateInputElement(a.SELECTORS.ADDED_UPSELL_ASIN_SELECTOR,
"");e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_CHECKOUT_CLICK,!0,p);q.location.href=a.ENDPOINTS.CHECKOUT_BASE+h.sessionId+"\x26ref\x3d"+d}function y(b){b.preventDefault();b=f(this).closest(a.SELECTORS.UPSELL_ATC_CONTAINER);var c=b.find(a.SELECTORS.UPSELL_ATC_BUTTON);b.find(a.SELECTORS.UPSELL_ATC_ERROR).hide();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_TRY_AGAIN,!1);c.click()}function w(b){b.preventDefault();
t();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_SIDE_SHEET_CLOSE,!1)}var f=d.$,m={$preFocusTrap:null,$postFocusTrap:null,isManagingFocus:!1,lastFocusElement:null,originalFocusSource:null};return{show:function(){f(a.SELECTORS.SIDE_SHEET_SHOW_MORE).unbind(a.EVENT.TYPE.CLICK,h).click(h);f(a.SELECTORS.SIDE_SHEET_SHOW_LESS).unbind(a.EVENT.TYPE.CLICK,l).click(l);f(a.SELECTORS.SIDE_SHEET_CART_BUTTON).unbind(a.EVENT.TYPE.CLICK,r).click(r);f(a.SELECTORS.SIDE_SHEET_PRIMARY_CART_BUTTON).unbind(a.EVENT.TYPE.CLICK,
r).click(r);f(a.SELECTORS.SIDE_SHEET_CHECKOUT_BUTTON).unbind(a.EVENT.TYPE.CLICK,x).click(x);f(a.SELECTORS.SIDE_SHEET_UPSELL_ATC).unbind(a.EVENT.TYPE.CLICK,p).click(p);f(a.SELECTORS.SIDE_SHEET_CLOSE_BUTTON).unbind(a.EVENT.TYPE.CLICK,w).click(w);f(a.SELECTORS.ATTACH_DSS_BACK_DROP).unbind(a.EVENT.TYPE.CLICK,w).click(w);f(a.SELECTORS.SIDE_SHEET_UPSELL_ATC_RETRY).unbind(a.EVENT.TYPE.CLICK,y).click(y);f(a.SELECTORS.MINI_DP_BACK_BUTTON).unbind(a.EVENT.TYPE.KEY_DOWN,k).keydown(k);var c=f(a.SELECTORS.SIDE_SHEET);
if(0===c.length)throw Error(a.ERROR.ATTACH_SIDE_SHEET_NOT_FOUND);m.originalFocusSource=document.activeElement;document.addEventListener("focus",g,!0);c=c[0];m.$preFocusTrap=d.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(c);m.$postFocusTrap=d.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(c);document.body.style.overflow="hidden";f(a.SELECTORS.ATTACH_DSS_MODAL_LAYER).show();f(a.SELECTORS.ATTACH_DSS_BACK_DROP).show();f(a.SELECTORS.SIDE_SHEET).animate({right:0},500,"linear");e.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GAP_ATC_TO_SIDE_SHEET);
c=f(a.SELECTORS.SIDE_SHEET_VERTICAL_SCROLL);0<c.length&&c[0].focus();b.manuallyLoadUpsellAsinImages();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_DISPLAY_SUCCESS,!1)}}});"use strict";k.when("A","hctp-attach-constants","hctp-attach-logger","hctp-natc-parameter-parser","amazon-api-cart-hctp-add-items").register("hctp-base-product",function(d,a,c,e,b){var v=d.createClass({_container:null,_rawNatcParameters:null,_cartItems:[],init:function(a){var b=
d.$(a);this._container=a;a=b.serializeArray();b={};for(var c=0;c<a.length;c++){var h=a[c];b[h.name]=h.value}this._rawNatcParameters=b;this._cartItems=e.createAddItemsRequestItems(this._rawNatcParameters)},isValid:function(){return e.checkValidParameters(this._rawNatcParameters)&&this.shouldUseNatc()},shouldUseNatc:function(){var a=d.$(this._container).find("[data-a-state*\x3datc-page-state]");0< !a.length&&(a=d.$(this._container).siblings("[data-a-state*\x3datc-page-state]"));0< !a.length&&(a=d.$("[data-a-state*\x3datc-page-state]"),
0<a.length&&(a=a.first()));return 0<a.length&&(a=JSON.parse(a.text()))&&a.hasOwnProperty("shouldUseNatc")?a.shouldUseNatc:!0},getAsins:function(){return this._cartItems.map(function(a){return a.asin})},execute:function(d){var e=this;d=d?d:"dp_atch_dss_base";c.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_LATENCY);return b.addItems(this._cartItems,d).then(function(b){c.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_LATENCY);return{request:e,response:b}}).catch(function(b){c.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_LATENCY);
return{request:e,response:b?b.data:z,error:b}})}});return{createRequest:function(a){return new v(a)}}});"use strict";k.when("A").register("hctp-natc-parameter-parser",function(d){var a={},c=/items?\[(\d+(?:\.\w+)?)\]\.?(.*)/,e=/\w+/g,b={asin:"string",offerListingId:"string",quantity:"integer","additionalParameters.giftOptions.includeGiftReceipt":"boolean","additionalParameters.installments.programId":"string","additionalParameters.pickupOption.addressId":"string","additionalParameters.pickupOption.locationId":"string"};
a.attemptTypeCoercion=function(a,c){if(b.hasOwnProperty(a))switch(b[a]){case "string":return c;case "integer":return parseInt(c);case "boolean":return"true"===c}try{var e=JSON.parse(c);return null===e||"string"===typeof e||d.$.isPlainObject(e)?c:e}catch(p){}return c};a.checkValidParameters=function(a){return a.hasOwnProperty("items[0.base][asin]")||a.hasOwnProperty("item[0].asin")};a.createAddItemsRequestItems=function(b){var d=[],l={},p;for(p in b)if(b.propertyIsEnumerable(p)){var g=b[p],t=c.exec(p);
if(t){var r=t[1];if(t=t[2].match(e)){l.hasOwnProperty(r)||(l[r]={});r=l[r];for(var v=t.join("."),q=0;q<t.length;q++){var k=t[q];q===t.length-1?r[k]=a.attemptTypeCoercion(v,g):(r.hasOwnProperty(k)||(r[k]={}),r=r[k])}}}}for(var w in l)l.propertyIsEnumerable(w)&&(b=l[w],"0.base"===w||"0"===w?d.unshift(b):d.push(b));return d};return a});"use strict";k.when("A","hctp-attach-constants").register("hctp-attach-logger",function(d,a){return{endLatencyCapture:function(a){"function"===typeof q.uex&&q.uex("ld",
a,{wb:1})},logClientSideMetric:function(c,d,b,v){"undefined"!==typeof q.csa&&"undefined"!==typeof q.ue&&"undefined"!==typeof q.ue.count&&(b&&q.csa("Events",{producerId:"valueshopping"})("log",{schemaId:a.CSA_EVENT_METRIC.SCHEMA_ID,producerId:a.CSA_EVENT_METRIC.PRODUCER_ID,featureName:a.CSA_EVENT_METRIC.FEATURE_NAME,metricType:c,messageId:d,entities:v},{ent:"all"}),q.ue&&"function"===typeof q.ue.count&&q.ue.count(d,(q.ue.count(d)||0)+1))},beginLatencyCapture:function(a){"function"===typeof q.uet&&
q.uet("bb",a,{wb:1})}}});"use strict";k.when("A","hctp-attach-constants","hctp-attach-logger").register("hctp-price-formatter",function(d,a,c){var e={};return{formatPrice:function(b,d,h){if(!q.Intl||!q.Intl.NumberFormat)return c.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.FORMAT_SIMPLE,!1),d+" "+b.toFixed(2);c.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.FORMAT_INTL,!1);var l=h+"/"+d;e.hasOwnProperty(l)||(e[l]=
new Intl.NumberFormat(h,{style:"currency",currency:d}));return e[l].format(b)}}});k.when("A","hctp-attach-constants","hctp-configs","hctp-attach-logger","hctp-utils","hctp-attach-side-sheet","hctp-base-product").register("hctp-atc-hijack",function(d,a,c,e,b,k,h){function l(c){b.updateCartInfoForBaseAsinATC(c);n(a.SELECTORS.CART_INFO_BASE_ATC_ERROR).addClass(a.CLASSES.AOK_HIDDEN);n(a.SELECTORS.CART_INFO_BASE_ATC_SUCCESS).removeClass(a.CLASSES.AOK_HIDDEN);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_SUCCESS,!1)}function p(c){b.updateCartInfoForBaseAsinATC(c);n(a.SELECTORS.CART_INFO_BASE_ATC_SUCCESS).addClass(a.CLASSES.AOK_HIDDEN);n(a.SELECTORS.CART_INFO_BASE_ATC_ERROR).removeClass(a.CLASSES.AOK_HIDDEN);n(a.SELECTORS.SIDE_SHEET_BASE_ATC_ALERT_CONTAINER).slideDown(700,"linear");e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_FAILURE,!1)}function g(b,c){n(a.SELECTORS.SIDE_SHEET_BASE_ATC_PROCESSING_ERROR_MSG).show();
b(c)}function t(b){b.preventDefault();y();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_TRY_AGAIN,!1);A.click()}function r(c,d){var e=A.closest("form");e=h.createRequest(e);e.isValid()?e.execute().then(function(e){!e.error&&e.response&&e.response.type===a.RESPONSE_TYPE.ADD_ITEMS_INCOMPLETE_ADD&&b.isFunction(d)?(n(a.SELECTORS.SIDE_SHEET_BASE_ATC_PARTIAL_ERROR_MSG).show(),d(e)):!e.error&&e.response&&b.isFunction(c)?c(e):e.error&&b.isFunction(d)&&
g(d,e)}):g(d)}function v(){e.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GAP_ATC_TO_SIDE_SHEET);try{w().then(function(b){r(l,p);b=n(a.SELECTORS.ATTACH_DSS_PLACEHOLDER);if(0===b.length)throw Error(a.ERROR.ATTACH_PLACEHOLDER_NOT_FOUND);b[0].innerHTML=B;u=c.getHctpConfig();k.show();n(a.SELECTORS.SIDE_SHEET_BASE_ATC_TRY_AGAIN).unbind(a.EVENT.TYPE.CLICK,t).click(t);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_SUCCESS,!1)}).catch(function(b){y();
e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_FAILURE,!1);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_DISPLAY_FAILURE,!1);A.click()})}catch(C){y(),e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_DISPLAY_FAILURE,!1),A.click()}}function x(b){b.stopPropagation();b.preventDefault();A=b.target;v();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_CLICK,!1)}function y(){d.$(document.body).undelegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,x)}function w(){return new Promise(function(b,c){null==B?(e.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_LATENCY),d.get(f(),{success:function(d){e.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_LATENCY);0===d.trim().length?c(!1):(B=d,b(!0))},error:function(b){e.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_LATENCY);
c(b)}})):b(!0)})}function f(){u=c.getHctpConfig();return"/gp/product/ajax?experienceId\x3dvalueAddsGxa\x26showFeatures\x3dvalueAddsGxa\x26userExperienceType\x3dATTACH\x26asin\x3d"+u.baseAsin+"\x26sr\x3d"+u.requestId+"\x26language\x3d"+u.languageOfPreference}function m(){var e=n(a.SELECTORS.ADD_TO_CART_BUTTON);u=c.getHctpConfig();if(!(u&&u.attachEligible&&e.length&&b.elementExists(a.SELECTORS.ATTACH_UNIFICATION_FLAG)))return d.$(document.body).undelegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,
x),null;d.$(document.body).undelegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,x);d.$(document.body).delegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,x)}var n=d.$,u=null,A=null,B=null;n.isFunction(q.markFeatureInteractive)&&q.markFeatureInteractive("atc",{hasComponents:!0,components:[{name:"show-hctp-attach",alwaysInteractive:!0}]});d.declarative("show-hctp-attach",["touchstart"],function(b){var c=b.$event.originalEvent;c.acknowledge&&
(c.acknowledge(0<b.$currentTarget.length?b.$currentTarget[0]:z),e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,"tnr-post-ack-atc",!1))});d.on(a.EVENT.PAGE_UPDATE,function(){m()});m()});k.when("A","3p-promise","hctp-configs").register("amazon-api-cart-hctp-client-helper",function(d,a,c){function e(a,b){b=b.ENDPOINT+"/"+a.apiPath;var c=[];if(a.additionalParameters)for(var d in a.additionalParameters)a.additionalParameters.hasOwnProperty(d)&&c.push(d+"\x3d"+encodeURIComponent(a.additionalParameters[d]));
c.length&&(b+="?"+c.join("\x26"));return b}function b(a,b){var c=b.CSRF_TOKEN;var e=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&e.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');e=e.join("; ");var g=a.languageOfPreference;g||(g=b.LANGUAGE_OF_PREFERENCE);b=g.replace(/_/g,"-");c={Accept:e,"Accept-Language":b,"x-api-csrf-token":c,"x-amzn-encrypted-slate-token":d.$('meta[name\x3d"encrypted-slate-token"]').prop("content")};a.requestType&&(c["Content-Type"]=
'application/vnd.com.amazon.api+json; type\x3d"'+a.requestType+'"');return c}function k(c,g){return new a(function(a,h){var t=e(c,g),l=b(c,g),p=c.data?JSON.stringify(c.data):z;return d.$.ajax({type:c.method,url:t,headers:l,data:p,xhrFields:{withCredentials:!0},dataType:"json",success:function(b){a(b)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(m){b.data=a.responseText}h(b)}})})}function h(){var a=c.getHctpConfig();if(!a)return null;
var b={CSRF_TOKEN:a.csrfAddCart,ENDPOINT:a.cartAapiEndpoint,LANGUAGE_OF_PREFERENCE:a.languageOfPreference};return{makeRequest:function(a){return k(a,b)}}}var l=h();return{getClient:function(){l||(l=h());return l}}});k.when("amazon-api-cart-hctp-client-helper").register("amazon-api-cart-hctp-add-items",function(d){var a=function(a){return a},c=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;throw a;};return{addItems:function(e,b){e={apiPath:"cart/carts/retail/items",
requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:e},additionalParameters:{}};b&&(e.additionalParameters.ref=b);return d.getClient().makeRequest(e).then(a).catch(c)}}});k.when("amazon-api-cart-hctp-client-helper").register("amazon-api-cart-hctp-summary",function(d){var a=function(a){return a};return{get:function(c){var e={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};c&&(e.additionalParameters.cartTypes=
c);return d.getClient().makeRequest(e).then(a)}}});"use strict";k.when("amazon-api-cart-hctp-client-helper").register("hctp-productV2",function(d){var a={API_PATH:{PRODUCTS:"products/"},REQUEST_METHOD:{GET:"GET"},REQUEST_TYPE:{PRODUCT_REQUEST_V2:"product.request/v2"},RESPONSE_TYPE:{PRODUCT_V2:"product/v2",PRODUCT_COLLECTION:"collection(product/v2)/v1"},RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{PRODUCT_IMAGES:"productImages(product.product-images/v2)"},getProduct:function(c,e,b,k){c=
{apiPath:a.API_PATH.PRODUCTS+c,requestType:a.REQUEST_TYPE.PRODUCT_REQUEST_V2,responseType:a.RESPONSE_TYPE.PRODUCT_V2,method:a.REQUEST_METHOD.GET,resourceInclusions:e,additionalParameters:b||{}};k&&(c.additionalParameters.ref=k);return d.getClient().makeRequest(c)},getProductsBatch:function(c,e,b,k){c={apiPath:a.API_PATH.PRODUCTS+c.join(","),requestType:a.REQUEST_TYPE.PRODUCT_REQUEST_V2,responseType:a.RESPONSE_TYPE.PRODUCT_COLLECTION,method:a.REQUEST_METHOD.GET,resourceInclusions:e,additionalParameters:b||
{}};k&&(c.additionalParameters.ref=k);return d.getClient().makeRequest(c)}};return a});"use strict";k.when("A").register("hctp-media-builder",function(d){var a={},c,e,b,k,h,l,p,g;a.init=function(d){c=d;h=k=b=e=z;l=c.width;p=c.height;g=[];c.styleCode&&g.push(encodeURIComponent(c.styleCode));return a};a.scaleToSquare=function(b){p=l=b;g.push("_SS"+b);return a};a.build=function(){var a=[];a.push("https://");a.push(e?e:"m.media-amazon.com");b?a.push("/images/G/",k,"/",b,"._CB",h):a.push("/images/I/",
c.physicalId,".");g.length&&a.push(g.join(""));(h||g.length)&&a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(c.extension);return{url:a.join(""),width:l,height:p}};return a})});